<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.149">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="the Manateam">

<title>Manateam - The LDA notebook</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/DHM_visual _logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Manateam</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">About Manateam</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./chapter-1.html">Getting started</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./chapter-2.html">Source material</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./chapter-3.html">The OCR notebook</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./chapter-4.html" aria-current="page">The LDA notebook</a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#using-the-lda-topic-modeling-notebook" id="toc-using-the-lda-topic-modeling-notebook" class="nav-link active" data-scroll-target="#using-the-lda-topic-modeling-notebook">Using the LDA topic modeling notebook</a>
  <ul class="collapse">
  <li><a href="#about-google-colab" id="toc-about-google-colab" class="nav-link" data-scroll-target="#about-google-colab">About Google Colab</a></li>
  <li><a href="#process-guide-for-the-lda-topic-modeling-notebook" id="toc-process-guide-for-the-lda-topic-modeling-notebook" class="nav-link" data-scroll-target="#process-guide-for-the-lda-topic-modeling-notebook">Process guide for the LDA topic modeling notebook</a>
  <ul class="collapse">
  <li><a href="#step-1" id="toc-step-1" class="nav-link" data-scroll-target="#step-1">Step 1:</a></li>
  <li><a href="#step-2" id="toc-step-2" class="nav-link" data-scroll-target="#step-2">Step 2:</a></li>
  <li><a href="#step-3" id="toc-step-3" class="nav-link" data-scroll-target="#step-3">Step 3:</a></li>
  <li><a href="#step-4" id="toc-step-4" class="nav-link" data-scroll-target="#step-4">Step 4:</a></li>
  <li><a href="#step-5" id="toc-step-5" class="nav-link" data-scroll-target="#step-5">Step 5:</a></li>
  <li><a href="#step-6" id="toc-step-6" class="nav-link" data-scroll-target="#step-6">Step 6:</a></li>
  <li><a href="#step-7" id="toc-step-7" class="nav-link" data-scroll-target="#step-7">Step 7:</a></li>
  <li><a href="#thats-it" id="toc-thats-it" class="nav-link" data-scroll-target="#thats-it">That’s it!</a></li>
  <li><a href="#optional" id="toc-optional" class="nav-link" data-scroll-target="#optional">Optional:</a></li>
  </ul></li>
  <li><a href="#future-improvements-applications" id="toc-future-improvements-applications" class="nav-link" data-scroll-target="#future-improvements-applications">Future improvements &amp; applications</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The LDA notebook</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>the Manateam </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<section id="using-the-lda-topic-modeling-notebook" class="level1">
<h1>Using the LDA topic modeling notebook</h1>
<p>You can find the LDA notebook <a href="https://github.com/DigitalHugManitees/DH_Topic_Workshop.git" title="Link to GitHub">here</a> on GitHub.</p>
<section id="about-google-colab" class="level2">
<h2 class="anchored" data-anchor-id="about-google-colab">About Google Colab</h2>
<p>Google Colab is a Jupyter Notebook that runs on Google’s servers, allowing you to run Python code on data calculated and stored on cloud servers. This is great for large, computationally heavy projects where processing can be increased easily with a few lines of code. Unlike Jupyter notebooks run locally on your computer, the Colab environment is independent of your locally installed environments, meaning that you are less likely to run into conflicts. The downside to the Google Colab environment is that any information created in Colab is erased when you close the browser, unless you save it somewhere, like GitHub or locally on your computer.</p>
</section>
<section id="process-guide-for-the-lda-topic-modeling-notebook" class="level2">
<h2 class="anchored" data-anchor-id="process-guide-for-the-lda-topic-modeling-notebook">Process guide for the LDA topic modeling notebook</h2>
<section id="step-1" class="level3">
<h3 class="anchored" data-anchor-id="step-1">Step 1:</h3>
<p>There are two ways to open the LDA notebook:</p>
<ol type="1">
<li><p>open through Github - you will use this process the first time opening the notebooks. Look for the ‘open in Colab’ button.</p>
<ol type="1">
<li>Save a copy of this notebook to your Google Drive. All changes will be saved to your own copy.</li>
</ol></li>
</ol>
<p><img src="images/Screen%20Shot%202022-09-19%20at%2010.06.02%20AM.png" class="img-fluid" alt="screen shot of GitHub"></p>
<ol type="1">
<li><p>Open through Colab - You can use this process if you have previously saved it to your Google Drive.</p>
<ol type="1">
<li><p>In Colab, go to File&gt;Open. This will open a dialog box.</p></li>
<li><p>At the top tabs of the dialog box, select Google Drive - you should see your previously saved copy.</p></li>
</ol></li>
</ol>
<p><img src="images/Screen%20Shot%202022-09-19%20at%2010.07.52%20AM.png" class="img-fluid" alt="open with Google Colab"></p>
<p>Run the first cell - this will connect to your Google Drive. A dialog box will open and ask you to select your Google account and ask for your permission to connect to your Google Drive.</p>
<p>It will also create a new directory in your Google Drive for all of the files needed for this project. You should see something like this indicating your new working directory.</p>
<p><img src="images/Screen%20Shot%202022-09-19%20at%2010.09.01%20AM.png" class="img-fluid" alt="screenshot of working directory location"></p>
<p>Run the cell that connects Colab to your drive. This gives permissions for information to be shared between the two and provides a safe place to store the results of your analysis.</p>
<p><img src="images/Screen%20Shot%202022-09-19%20at%2010.10.48%20AM.png" class="img-fluid" alt="screenshot of allowing colab to connect to drive"></p>
<p>Your working directory is now set as folders on your Google Drive. All files saved here will be safe and not deleted when you close the notebook.</p>
</section>
<section id="step-2" class="level3">
<h3 class="anchored" data-anchor-id="step-2">Step 2:</h3>
<p>Install the libraries and dependencies needed for this notebook.</p>
<p>This cell also installs the spaCy model that is used to train the algorithm. There are different models as well as a wide range of language support. You can read more about them <a href="https://spacy.io/usage/models">here</a>.</p>
</section>
<section id="step-3" class="level3">
<h3 class="anchored" data-anchor-id="step-3">Step 3:</h3>
<p>Import your data. Remember all those text files you created using the OCR notebook? Before running the cell in Step 3, move all your .txt files to the working directory in your Google Drive. You can drag them from your file manager (Finder in Mac, Explorer in Win) directly into the Colab file manager on the left.</p>
<p><img src="images/Screen%20Shot%202022-09-19%20at%2012.23.55%20PM.png" class="img-fluid" alt="screenshot"></p>
</section>
<section id="step-4" class="level3">
<h3 class="anchored" data-anchor-id="step-4">Step 4:</h3>
<p>Set the number of n-grams. These are word combinations that are particular to your text. As an example, 2-grams, or bigrams, are word combinations like ‘Dalhousie University’ or ‘roller skate’. If they are separated, then contextual meaning can be lost. Whole phrases can be maintained this way, though specific phrases can be preserived at a later step.</p>
<p>You can adjust the n-grams at the code marked <code>number_of_n=3</code>. In this case, word combinations up to trigrams are preserved.</p>
<p>Allowing unigrams (singular words) can also be permitted. However, these can dominate due to their increased frequency and should be tried to see if if improves your results. Look for the code <code>include_unigrams=False</code> and change <code>False</code> to <code>True</code> if you wish to include unigrams.</p>
<p><img src="images/Screen%20Shot%202022-09-19%20at%2012.30.44%20PM.png" class="img-fluid" alt="ngrams adjustment screenshot"></p>
</section>
<section id="step-5" class="level3">
<h3 class="anchored" data-anchor-id="step-5">Step 5:</h3>
<p>Step 5 cleans the data by removing unneccesary words, punctuations, and symbols. You can also preserve certain phrases or words if they are important to you. Look for the code <code>author_assigned_keywords =</code>` and type each phrase or word you want inside double quotes, separating each with commas.</p>
<p><img src="images/Screen%20Shot%202022-09-19%20at%2012.33.43%20PM.png" class="img-fluid" alt="step 5 screenshot"></p>
<p>Completing step 5 will have created tokens and placed each documents tokens in a table along with the file name, document year, and content for further analysis.</p>
</section>
<section id="step-6" class="level3">
<h3 class="anchored" data-anchor-id="step-6">Step 6:</h3>
<p>This cell runs several processes we should be aware of.</p>
<ul>
<li><p>It applies a filter against the dictionary to reduce extremes. With small corpora, we need to turn this off as you can see with the <code>#</code> before the line <code>#dictionary.filter_extremes(no_below=5, no_above=0.2, keep_n=1000)</code>. If you are using a large corpus, then remove the <code>#</code> to make this line functional again.</p></li>
<li><p>It runs the LDA analysis with settings that can be adjusted, such as <code>num_topics=5</code>. In this case, 5 topics has already been specified. You can increase or decrease as you need.</p></li>
</ul>
<p>It creates the pyLDAvis interactive webpage or results. This will be deposited in your working directory.</p>
<p><img src="images/Screen%20Shot%202022-09-19%20at%2012.45.46%20PM.png" class="img-fluid" alt="step 5 screenshot"></p>
</section>
<section id="step-7" class="level3">
<h3 class="anchored" data-anchor-id="step-7">Step 7:</h3>
<p>The final step in our process creates additional output from the analysis that may be useful for information retrieval or other analysis.</p>
<ul>
<li><p>The number of topics are printed along with their score.</p></li>
<li><p>The topics and top 10 words/phrases are printed. You can cut and paste these into Excel or a table in a document for reporting.</p></li>
<li><p>A Pandas table is created with the cluster and score next to each document, (since this was a document level clustering analysis). The table is exported as a .csv and saved in your working directory.</p></li>
</ul>
</section>
<section id="thats-it" class="level3">
<h3 class="anchored" data-anchor-id="thats-it">That’s it!</h3>
<p>That is the final step in the analysis! You may want to move the filles you used for the analysis and the results into another folder if you’d like to analyze another batch. Simply move them, and put more .txt files into the working directory and you can repeat the notebook from Step 3.</p>
<p>Your examples should look something like <a href="TE_results.html">this example</a> from a project that investigated ‘teaching effectiveness’ across a corpus of articles.</p>
</section>
<section id="optional" class="level3">
<h3 class="anchored" data-anchor-id="optional">Optional:</h3>
<p>There is a testing option for evaluating the number of topics. This works best on large corpora compared with small ones. The coherence scores were a conventional way to evaluate topic analysis, but it is beginning to fall out of favor with newer methods.</p>
<p>You can read more about coherence <a href="https://gensimr.news-r.org/articles/coherence.html">here</a> and <a href="https://www.baeldung.com/cs/topic-modeling-coherence-score">here</a> (though this is an ad-heavy website, but the explanation is helpful).</p>
<p>The graph is read as <strong>coherence closer to 0 is better</strong>.</p>
</section>
</section>
<section id="future-improvements-applications" class="level2">
<h2 class="anchored" data-anchor-id="future-improvements-applications">Future improvements &amp; applications</h2>
<ul>
<li><p>improve the pyLDAvis to show file names as a mouseover or separate table.</p></li>
<li><p>explain more of the tuning parameters to LDA.</p></li>
<li><p>Evaluate unsupervised models versus trained models</p></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">
        <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="./about.html">About</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="./license.qmd">License</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="./trademark.qmd">Trademark</a>
  </li>  
</ul>
      </div>
  </div>
</footer>



</body></html>